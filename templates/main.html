<!doctype html>
<html lang="en">
<head>

    <!-- Webpage Title -->
    <title>Codiary 시작</title>

    <!-- Required meta tags!! -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+KR:wght@200;300;400;500;600;700;900&display=swap"
          rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="stylesheet" href=" https://full-mini.github.io/Codiary/templates/style.css">

    <!-- Bulma CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.1/css/bulma.min.css">

    <!--<link rel="stylesheet" href=" https://full-mini.github.io/Codiary/templates/style.css">-->
    <link href="style.css" rel="stylesheet" type="text/css" />
    <script src="https://kit.fontawesome.com/b47588dd55.js" crossorigin="anonymous"></script>
    <!-- JS -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    <!-- JS -->

    <script>

        window.onload=function(){
          //실행할 내용
            var open = false;
        }

        //게시물 저장 서버에 보내기!
        //id, 제목, 내용 보내기
        function save_comment() {
            let title = $('#title').val()
            let comment = $('#comment').val()
            $.ajax({
                type: 'POST',
                url: '/upload',
                data: {title_give: title, comment_give: comment},
                success: function (response) {
                    console.log(response)
                    alert(response['msg'])
                    window.location.reload()
                }
            })
        }


        // 서버에서 정보 받아오기
        //아이디, 제목, 내용, 시간, 카운트!E

        // 로그아웃은 내가 가지고 있는 토큰만 쿠키에서 없애면 됩니다.
        function logout() {
            $.removeCookie('mytoken');
            alert('로그아웃!')
            window.location.href = '/login'
        }

        function more_context(num) {
            if(document.getElementsByClassName("more_bt")[num].style.display=='block') {
                if(open>=0){
                    document.getElementsByClassName("card-text")[open].style.height = "72px";
                    document.getElementsByClassName("card-text")[open].style.display = "-webkit-box";
                    document.getElementsByClassName("more_bt")[open].style.display="block";
                    document.getElementsByClassName("hide_bt")[open].style.display="none";
                    document.getElementsByClassName("edit_bt")[open].style.display = "none";
                    document.getElementsByClassName("del_bt")[open].style.display = "none";
                }
                document.getElementsByClassName("card-text")[num].style.height = "100%";
                document.getElementsByClassName("card-text")[num].style.display = "block";
                document.getElementsByClassName("more_bt")[num].style.display = "none";
                document.getElementsByClassName("hide_bt")[num].style.display = "block";
                document.getElementsByClassName("edit_bt")[num].style.display = "block";
                document.getElementsByClassName("del_bt")[num].style.display = "block";
                open=num;
            } else {
                document.getElementsByClassName("card-text")[num].style.height = "72px";
                document.getElementsByClassName("card-text")[num].style.display = "-webkit-box";
                document.getElementsByClassName("more_bt")[num].style.display= "block";
                document.getElementsByClassName("hide_bt")[num].style.display= "none";
                document.getElementsByClassName("edit_bt")[num].style.display = "none";
                document.getElementsByClassName("del_bt")[num].style.display = "none";
            }
        }


    </script>
</head>
<body>
<nav>
    <h1> {{nickname}} 님의 CODIARY12</h1>
    <!-- 로그아웃 버튼 -->
    <button class="button is-danger" onclick="logout()">로그아웃하기</button>
</nav>
<main>
   <!-- 정렬, 공유, 검색 기능 구현 -->
   <!-- 게시물 크롤링, 언어관련 강의 -->
    <div class="card border-dark mb-3" style="width:65rem;">
        <div class="card-header">
            <!-- 노트 상단 왼쪽 -->
            <div class="note-top-day ml-2">Day 02</div>
            <!-- 노트 상단 오른쪽 -->
            <div class="note-top-title ml-2">
                <div>22.6.21 PM 18:30</div>
                <div>나는 제목이다</div>
            </div>
        </div>
        <div class="card-body text-dark note-bottom">
            <!-- 노트 내용이 들어가는 부분 -->
            <div class="card-text ml-3 pr-5">
                동해 물과 백두산이 마르고 닳도록하느님이 보우하사 우리나라 만세.무궁화 삼천리 화려 강산대한 사람, 대한으로 길이 보전하세.남산 위에 저 소나무, 철갑을 두른 듯바람 서리 불변함은 우리 기상일세.무궁화 삼천리 화려 강산대한 사람, 대한으로 길이 보전하세.가을 하늘 공활한데 높고 구름 없이밝은 달은 우리 가슴 일편단심일세.무궁화 삼천리 화려 강산대한 사람 대한으로 길이 보전하세 대한으로 길이 보전하세.가을 하늘 공활한데 높고 구름 없이밝은 달은 우리 가슴 일편단심일세.무궁화 삼천리 화려 강산대한 사람 대한으로 길이 보전하세  삼천리 화려 강산대한 사람 대한으로 길이 보전하세 대한으로 길이 보전하세.가을 하늘 공활한데 높고 구름 없이밝은 달은 우리 가슴 일편단심일세.무궁화 삼천리 화려 강산대한 사람 대한으로 길이 보전하세
            </div>
            <!-- 노트 버튼 (수정/삭제/감추기/더보기) -->
            <div class="note-button ml-3 mt-2" >
                <button type="button" class="edit_bt btn btn-primary ml-1" style="display:none"><i class="fa-solid fa-pen"></i> 수정</button>
                <button type="button" class="del_bt btn btn-danger ml-1" style="display:none"><i class="fa-solid fa-trash-can"></i> 삭제</button>
                <button type="button" class="more_bt btn btn-secondary ml-1" onclick="more_context(0)" style="display:block" ><i class="fa-solid fa-caret-down"></i> 더보기</button>
                <button type="button" class="hide_bt btn btn-secondary ml-1" onclick="more_context(0)" style="display:none" ><i class="fa-solid fa-caret-up"></i> 감추기</button>
            </div>
        </div>
    </div>


    <div class="card border-dark mb-3" style="width:65rem;">
          <div class="card-header">
            <div class="note-top-day ml-2">Day 02</div>
            <div class="note-top-title ml-2">
                <div>22.6.21 PM 18:30</div>
                <div>나는 제목이다</div>
            </div>
        </div>
        <div class="card-body text-dark note-bottom">
            <div class="card-text ml-3 pr-5">
                동해 물과 백두산이 마르고 닳도록하느님이 보우하사 우리나라 만세.무궁화 삼천리 화려 강산대한 사람, 대한으로 길이 보전하세.남산 위에 저 소나무, 철갑을 두른 듯바람 서리 불변함은 우리 기상일세.무궁화 삼천리 화려 강산대한 사람, 대한으로 길이 보전하세.가을 하늘 공활한데 높고 구름 없이밝은 달은 우리 가슴 일편단심일세.무궁화 삼천리 화려 강산대한 사람 대한으로 길이 보전하세 대한으로 길이 보전하세.가을 하늘 공활한데 높고 구름 없이밝은 달은 우리 가슴 일편단심일세.무궁화 삼천리 화려 강산대한 사람 대한으로 길이 보전하세  삼천리 화려 강산대한 사람 대한으로 길이 보전하세 대한으로 길이 보전하세.가을 하늘 공활한데 높고 구름 없이밝은 달은 우리 가슴 일편단심일세.무궁화 삼천리 화려 강산대한 사람 대한으로 길이 보전하세
            </div>
            <div class="note-button ml-3 mt-2" >
                <button type="button" class="edit_bt btn btn-primary ml-1" style="display:none"><i class="fa-solid fa-pen"></i> 수정</button>
                <button type="button" class="del_bt btn btn-danger ml-1" style="display:none"><i class="fa-solid fa-trash-can"></i> 삭제</button>
                <button type="button" class="more_bt btn btn-secondary ml-1" onclick="more_context(1)" style="display:block" ><i class="fa-solid fa-caret-down"></i> 더보기</button>
                <button type="button" class="hide_bt btn btn-secondary ml-1" onclick="more_context(1)" style="display:none" ><i class="fa-solid fa-caret-up"></i> 감추기</button>
            </div>
        </div>
    </div>

    <div class="card border-dark mb-3" style="width:65rem;">
          <div class="card-header">
            <div class="note-top-day ml-2">Day 02</div>
            <div class="note-top-title ml-2">
                <div>22.6.21 PM 18:30</div>
                <div>나는 제목이다</div>
            </div>
        </div>
        <div class="card-body text-dark note-bottom">
            <div class="card-text ml-3 pr-5">
                동해 물과 백두산이 마르고 닳도록하느님이 보우하사 우리나라 만세.무궁화 삼천리 화려 강산대한 사람, 대한으로 길이 보전하세.
            </div>

            <div class="note-button ml-3 mt-2" >
                <button type="button" class="edit_bt btn btn-primary ml-1" style="display:none"><i class="fa-solid fa-pen"></i> 수정</button>
                <button type="button" class="del_bt btn btn-danger ml-1" style="display:none"><i class="fa-solid fa-trash-can"></i> 삭제</button>
                <button type="button" class="more_bt btn btn-secondary ml-1" onclick="more_context(2)" style="display:block" ><i class="fa-solid fa-caret-down"></i> 더보기</button>
                <button type="button" class="hide_bt btn btn-secondary ml-1" onclick="more_context(2)" style="display:none" ><i class="fa-solid fa-caret-up"></i> 감추기</button>
            </div>
        </div>
    </div>

</main>

<footer>
    <!-- 게시물 쓰기 버튼, 클릭시 모달 창 띄움 -->
    <!-- 모달 창 설정 -->
    <div class="write-area">
        <div class="d-grid gap-2 add_note js-click"><button type="button" class="btn btn-primary" id="btn-modal">새 노트 쓰기</button></div>
        <div class="write-modal">
            <div class="write-nav">
                <div class="form-floating mb-3">
                    <input type="text" class="form-control" id="title" placeholder="title">
                    <label for="floatingInput">제목</label>
                </div>
            </div>
            <div class="write-body">
                <div class="todo-area form-floating mb-3">
                    <input type="email" class="todo-input form-control" id="todo-input" placeholder="todo">
                    <label for="floatingInput">To Do</label>
                    <button type="button" class="btn btn-primary">추가</button>
                </div>
                <div class="panel-body">
                    <ul class="list-group">
                        <li class="list-group-item">
                            <strong class="list-group-item-context">닫기 버튼만들기기기기기기기기기기기</strong>
                            <div class="list-group-item-bts">
                                <button type="button" class="btn btn-info">수정</button>
                                <button type="button" class="btn btn-danger ml-1">삭제</button>
                            </div>

                        </li>
                        <li class="list-group-item">
                            <strong>DB 연결하기</strong>
                            <button type="button" class="btn btn-danger ml-2">삭제</button>
                        </li>
                        <li class="list-group-item">
                            <strong>버튼만들기</strong>
                            <button type="button" class="btn btn-danger ml-2">삭제</button>
                        </li>
                        <li class="list-group-item">
                            <strong>버튼만들기</strong>
                            <button type="button" class="btn btn-danger ml-2">삭제</button>
                        </li>
                    </ul>
                </div>
                <div class="form-floating">
                  <textarea class="form-control" placeholder="Leave a comment here" id="floatingTextarea" onkeydown="resize(this)"></textarea>
                  <label for="floatingTextarea">내용</label>
                </div>
            </div>
            <div class="write-footer">
                <a class="js-close">닫기</a>
            </div>
        </div>
    </div>

    <script>
        function resize(obj) {
            obj.style.height = "1px";
          obj.style.height = (12 + obj.scrollHeight) + "px";
        }

        <!-- 모달창:내용 높이 제한 계산 -->
/*
        $(document).ready(function () {
            $('.write-body').on('keyup', 'textarea', function (e) {
                if (window.innerWidth <= window.innerHeight) {
                    // Portrait 모드일 때 실행할 스크립트
                    height_rate = 0.7;
                } else {
                    // Landscape 모드일 때 실행할 스크립트
                    height_rate = 0.4;
                }
                $(this).css('height', 'auto');
                $(this).height(this.scrollHeight);
                $(".comment-area").css('max-height', $( ".write-modal" ).height() * height_rate);
                if($('.comment-area').height()> $( ".write-modal" ).height() * height_rate){
                    $(".comment-area").css('height', $( ".write-modal" ).height() * height_rate);
                }
                console.log($( ".write-modal" ).height() * height_rate)
            });
            $('.write-body').find('textarea').keyup();
        });
*/
        <!-- 모달창: 열기 / 닫기 버튼 -->
        $('.js-click').click(function(){
          $('.write-area').addClass('modal-open');
          $("body").css('position','fixed');
        });

        $('.js-close').click(function(){
          $('.write-area').removeClass('modal-open');
          $("body").css('position','relative');
        });
    </script>

</footer>

</body>
</html>