<!doctype html>
<html lang="en">
<head>

    <!-- Webpage Title -->
    <title>Codiary 시작</title>

    <!-- Required meta tags!! -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+KR:wght@200;300;400;500;600;700;900&display=swap"
          rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.1/css/bulma.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="stylesheet" href=" https://full-mini.github.io/Codiary/templates/style.css">

    <!-- Bulma CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.1/css/bulma.min.css">

    <script src="https://kit.fontawesome.com/b47588dd55.js" crossorigin="anonymous"></script>
    <!-- JS -->
    <!-- JS -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    <!-- 글쓰기 에디터 관련 -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
            integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
            crossorigin="anonymous"></script>

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
          integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
            integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6"
            crossorigin="anonymous"></script>

    <link href="https://cdn.jsdelivr.net/npm/summernote@0.8.18/dist/summernote-bs4.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/summernote@0.8.18/dist/summernote-bs4.min.js"></script>

    <!-- 깃헙 main에서 CSS 가져오기-->
    <!--<link rel="stylesheet" href=" https://full-mini.github.io/Codiary/templates/style.css">-->

    <!-- 로컬에서 CSS 가져오기-->
    <link href="/static/style.css" rel="stylesheet" type="text/css"/>

    <script>
        $(document).ready(function () {
            $('#summernote').summernote({
                placeholder: '내용을 입력해주세요.',
                tabsize: 6,
                height: 300,
                toolbar: [
// [groupName, [list of button]]
                    ['fontname', ['fontname']],
                    ['fontsize', ['fontsize']],
                    ['style', ['bold', 'italic', 'underline', 'strikethrough', 'clear']],
                    ['color', ['forecolor', 'color']],
                    ['table', ['table']],
                    ['para', ['ul', 'ol', 'paragraph']],
                    ['height', ['height']],
                    ['insert', ['picture', 'link', 'video']]
                ],
                fontNames: ['Arial', 'Arial Black', 'Comic Sans MS', 'Courier New', '맑은 고딕', '궁서', '굴림체', '굴림', '돋움체', '바탕체'],
                fontSizes: ['8', '9', '10', '11', '12', '14', '16', '18', '20', '22', '24', '28', '30', '36', '50', '72']
            });
        });
    </script>

    <script>
        const today = toStringByFormatting(new Date(), ',')
        /* 테스트 실행 에러로 인한 주석처리
        let id_data = {{ data.id|tojson }}
*/
        $(document).ready(function () {
            show_comment();
        });

        function leftPad(value) {
            if (value >= 10) {
                return value;
            }

            return `0${value}`;
        }

        function toStringByFormatting(source, delimiter = '-') {
            const year = source.getFullYear();
            const month = leftPad(source.getMonth() + 1);
            const day = leftPad(source.getDate());

            return [year, month, day].join(delimiter);
        }

        function sharetwitter() {
            let sendUrl = "naver.com";
            let sendText = "공유 테스트";
            window.open("https://twitter.com/intent/tweet?text=" + sendText + "&url=" + sendUrl);
        }

        let open_note = false;
        let writing = false;
        let array_todo = [];
        let array_num = 0;

        $(document).ready(function () {
            $('#todo-input').keydown(function (key) {
                if (key.keyCode == 13) {
                    add_todo()
                }
            });
            $(".list-group-item").click(function() {
               let className = $(this).attr("class");
               let todo_num = $(this).attr("todo-num");
               if (className.includes('active')){
                   // Todo취소
                   $(this).removeClass('todo-active');
                   $(this).addClass('todo-none');
                   console.log(open_note,todo_num)
               } else if (className.includes('todo-none')) {
                   // Todo완료
                   $(this).removeClass('todo-none');
                   $(this).addClass('todo-active');
                   console.log(open_note,todo_num)
               }
            });
        });

        function delet_todo(num) {
            if (writing && array_todo[num] != '') {
                array_todo[num] = '';
                let child_element = document.getElementById(`todo_child_${num}`);
                child_element.remove();
            }
        }

        function add_todo() {
            if (writing) {
                let todo_text = ($('#todo-input').val()).trim()

                if (todo_text != "") {
                    let temp_html = `<li class="todo_child list-group-item" id="todo_child_${array_num}">
                                        <strong class="todo_child-context">${todo_text}</strong>

                                        <div class="todo_child-bts">
                                            <button type="button" class="btn btn-danger" onclick="delet_todo(${array_num})">삭제</button>
                                        </div>

                                    </li>`
                    array_todo.push(todo_text)
                    array_num += 1
                    console.log(array_num, array_todo)
                    $('#todo-input').val('');
                    $('#todo_parent').append(temp_html);
                    alert("To-do 리스트에 추가 되었습니다.")
                    $('#todo-input').focus();
                }
            }
        }


        function toStringByFormatting(source, delimiter = '-') {
            const year = source.getFullYear();
            const month = leftPad(source.getMonth() + 1);
            const day = leftPad(source.getDate());

            return [year, month, day].join(delimiter);
        }

        // 로그아웃은 내가 가지고 있는 토큰만 쿠키에서 없애면 됩니다.
        function logout() {
            $.removeCookie('mytoken');
            alert('로그아웃!')
            window.location.href = '/login'
        }

        function save_comment() {
            <!-- 제목 / 내용 2가지 체크 빈칸일 경우 alart -->
            if ($('#context-title').val() == '' || $('#summernote').val() == '' || $('#summernote').val() == '<p><br></p>') {
                alert('제목과 내용을 모두 채워주세요! (오늘 할 일은 선택)');
                return;
            }

            <!-- Todo리스트 있는지 확인 후 빈 값 지우고 array_todo 로 다시 저장하기 -->
            if(array_todo.length>0){
                array_todo=array_todo.filter(function(item) {
                return item !== null && item !== undefined && item !== '';
                });
            }

            let title = $('#context-title').val()
            let comment = $('#summernote').val()

            let id = id_data
            let date = today

            // 제목: title [title_give]
            // 내용 : comment [comment_give]
            // 할일: array_todo [todo_give]
            // id값 : id_data [id_give]
            // 오늘 날짜 : date [date_give]

            $.ajax({
                type: 'POST',
                url: '/upload',
                data: {title_give: title, comment_give: comment, todo_give: array_todo, id_give: id, date_give: date},
                success: function (response) {
                    console.log(response)
                    alert(response['msg'])
                    window.location.reload()
                }
            })
        }

        function modify_note(num) {
            console.log("수정: ",num);
        }

        function delet_note(num){
            console.log("삭제:",num);
        }

        function more_context(num) {
            if (document.getElementsByClassName("more_bt")[num].style.display == 'block') {
                if (typeof open_note == "number") {
                    document.getElementsByClassName("card-text")[open_note].style.height = "72px";
                    document.getElementsByClassName("card-text")[open_note].style.display = "-webkit-box";
                    document.getElementsByClassName("more_bt")[open_note].style.display = "block";
                    document.getElementsByClassName("hide_bt")[open_note].style.display = "none";
                    document.getElementsByClassName("edit_bt")[open_note].style.display = "none";
                    document.getElementsByClassName("del_bt")[open_note].style.display = "none";
                    document.getElementsByClassName("todo-note-list")[open_note].style.display = "none";
                }
                document.getElementsByClassName("card-text")[num].style.height = "100%";
                document.getElementsByClassName("card-text")[num].style.display = "block";
                document.getElementsByClassName("more_bt")[num].style.display = "none";
                document.getElementsByClassName("hide_bt")[num].style.display = "block";
                document.getElementsByClassName("edit_bt")[num].style.display = "block";
                document.getElementsByClassName("del_bt")[num].style.display = "block";
                document.getElementsByClassName("todo-note-list")[num].style.display = "block";
                open_note = num;
            } else {
                document.getElementsByClassName("card-text")[num].style.height = "72px";
                document.getElementsByClassName("card-text")[num].style.display = "-webkit-box";
                document.getElementsByClassName("more_bt")[num].style.display = "block";
                document.getElementsByClassName("hide_bt")[num].style.display = "none";
                document.getElementsByClassName("edit_bt")[num].style.display = "none";
                document.getElementsByClassName("del_bt")[num].style.display = "none";
                document.getElementsByClassName("todo-note-list")[num].style.display = "none";
            }
        }

        function show_comment() {
            $.ajax({
                type: "GET",
                url: "/getcomment",
                data: {},
                success: function (response) {
                    let rows = response['comments']
                    for (let i = 0; i < rows.length; i++) {
                        console.log(rows[i])
                        let title = rows[i]['title']
                        let comment = rows[i]['comment']
                        let date = rows[i]['date']
                        let count = rows[i]['count']
                        let temp_html = `<div class="card border-dark mb-3" id="item_note_${count}">
                                            <div class="card-header">
                                                <!-- 노트 상단 왼쪽 -->
                                                <div class="note-top-day ml-2">Note ${count}</div>
                                                <!-- 노트 상단 오른쪽 -->
                                                <div class="note-top-title ml-2">
                                                    <div>${date}</div>
                                                    <div>${title}</div>
                                                </div>
                                            </div>
                                            <div class="card-body text-dark note-bottom">
                                                <!-- 노트 내용이 들어가는 부분 -->
                                                <div class="card-text ml-1 mr-1">
                                                    ${comment}
                                                </div>
                                                <!-- 노트 버튼 (수정/삭제/감추기/더보기) -->
                                                <div class="note-button ml-3 mt-2">
                                                    <!-- >> 수정버튼 기능추가 해야함 -->
                                                    <button type="button" class="edit_bt btn btn-primary ml-1" onclick="modify_note(${count})" style="display:none"><i
                                                            class="fa-solid fa-pen"></i>
                                                    </button>
                                                    <!-- >> 삭제버튼 기능추가 해야함 -->
                                                    <button type="button" class="del_bt btn btn-danger ml-1" onclick="delet_note(${count})" style="display:none"><i
                                                            class="fa-solid fa-trash-can"></i>
                                                    </button>
                                                    <button type="button" class="more_bt btn btn-secondary ml-1" onclick="more_context(${count})"
                                                            style="display:block"><i class="fa-solid fa-caret-down"></i> 더보기
                                                    </button>
                                                    <button type="button" class="hide_bt btn btn-secondary ml-1" onclick="more_context(${count}"
                                                            style="display:none"><i class="fa-solid fa-caret-up"></i> 감추기
                                                    </button>
                                                </div>
                                            </div>
                                        </div>`
                        $('#comment-list').append(temp_html)
                    }
                }
            });
        }
    </script>

</head>

<body>
<nav>
    <h1> {{ data.nick }}님의 CODIARY</h1>
    <button class="button is-danger" onclick="logout()">로그아웃하기</button>
</nav>
<main>
    <div class="search-box d-flex justify-content-center">
        <input id="input-word" class="form-control" style="margin-right: 0.5rem">
        <button class="btn btn-light" onclick="find_word()"><i class="fa-solid fa-magnifying-glass"></i>
        </button>
    </div>
    <div id="comment-list">
        <!-- 노트1 추가 -->
        <div class="card border-dark mb-3" id="item_note_0">
            <div class="card-header">
                <!-- 노트 상단 왼쪽 -->
                <div class="note-top-day ml-2">Day 02</div>
                <!-- 노트 상단 오른쪽 -->
                <div class="note-top-title ml-2">
                    <div>22.6.21 PM 18:30</div>
                    <div>나는 제목이다</div>
                </div>
            </div>
            <div class="card-body text-dark note-bottom">
                <!-- 노트 내용이 들어가는 부분 -->
                <div class="card-text ml-1 mr-1">
                    동해 물과 백두산이 마르고 닳도록하느님이 보우하사 우리나라 만세.무궁화 삼천리 화려 강산대한 사람, 대한으로 길이 보전하세.남산 위에 저 소나무, 철갑을 두른 듯바람 서리 불변함은 우리
                    기상일세.무궁화 삼천리 화려 강산대한 사람, 대한으로 길이 보전하세.가을 하늘 공활한데 높고 구름 없이밝은 달은 우리 가슴 일편단심일세.무궁화 삼천리 화려 강산대한 사람 대한으로 길이
                    보전하세 대한으로 길이 보전하세.가을 하늘 공활한데 높고 구름 없이밝은 달은 우리 가슴 일편단심일세.무궁화 삼천리 화려 강산대한 사람 대한으로 길이 보전하세 삼천리 화려 강산대한 사람
                    대한으로 길이 보전하세 대한으로 길이 보전하세.가을 하늘 공활한데 높고 구름 없이밝은 달은 우리 가슴 일편단심일세.무궁화 삼천리 화려 강산대한 사람 대한으로 길이 보전하세
                </div>

                <div class="todo-note-list mt-4" style="display:none">


                    <div class="list-group">
    <!--TODO가 없을때 상단 표시-->
                        <h7 class="todo-notice ml-3 mb-3" style="text-align: left"><i class="fa-solid fa-bullhorn"></i> 지금 TO DO LIST 를 만들어보세요!</i></h7>
    <!--TODO가 있을때 상단 표시-->
                        <h3 class="todo-logo ml-3 mb-3" style="text-align: left"><i class="fa-solid fa-pen-to-square"> TO DO LIST</i></h3>
    <!--TODO추가구역 시작-->
    <!--todoitem 시작-->
                        <div class="list-group-item todo-item todo-active" aria-current="true" todo-num="1">
                            <div class="icon_state_todo">
                                <div class="fa-solid fa-circle-check mr-3" id="icon_success" style="color:green"> 임무완료!</div>
                                <div class="fa-solid fa-circle-minus mr-3" id="icon_yet" style="color:red"> 아직...</div>
                            </div>
                            <span class="todo-item-text">The current link item</span>
                        </div>
    <!--todoitem 끝-->
                        <div class="list-group-item todo-item todo-none" aria-current="true" todo-num="2">
                            <div class="icon_state_todo">
                                <div class="fa-solid fa-circle-check mr-3" id="icon_success" style="color:green"> 임무완료!</div>
                                <div class="fa-solid fa-circle-minus mr-3" id="icon_yet" style="color:red"> 아직...</div>
                            </div>
                            <span class="todo-item-text">The current link item</span>
                        </div>
    <!--todoitem 끝/시작-->
                        <div class="list-group-item todo-item todo-none" aria-current="true" todo-num="3">
                            <div class="icon_state_todo">
                                <div class="fa-solid fa-circle-check mr-3" id="icon_success" style="color:green"> 임무완료!</div>
                                <div class="fa-solid fa-circle-minus mr-3" id="icon_yet" style="color:red"> 아직...</div>
                            </div>
                            <span class="todo-item-text">The current link item</span>
                        </div>
    <!--todoitem 끝/시작-->
                        <div class="list-group-item todo-item todo-none" aria-current="true" todo-num="4">
                            <div class="icon_state_todo">
                                <div class="fa-solid fa-circle-check mr-3" id="icon_success" style="color:green"> 임무완료!</div>
                                <div class="fa-solid fa-circle-minus mr-3" id="icon_yet" style="color:red"> 아직...</div>
                            </div>
                            <span class="todo-item-text">The current link item</span>
                        </div>
   <!--TODO추가구역 끝-->
                    </div>
                </div>
                <!-- 노트 버튼 (수정/삭제/감추기/더보기) -->
                <div class="note-button ml-3 mt-2">
                    <!-- >> 수정버튼 기능추가 해야함 -->
                    <button type="button" onclick="modify_note(0)" class="edit_bt btn btn-primary ml-1" style="display:none"><i
                            class="fa-solid fa-pen"></i>
                    </button>
                    <!-- >> 삭제버튼 기능추가 해야함 -->
                    <button type="button" onclick="delet_note(0)" class="del_bt btn btn-danger ml-1" style="display:none"><i
                            class="fa-solid fa-trash-can" ></i>
                    </button>
                    <button type="button" class="more_bt btn btn-secondary ml-1" onclick="more_context(0)"
                            style="display:block"><i class="fa-solid fa-caret-down"></i> 더보기
                    </button>
                    <button type="button" class="hide_bt btn btn-secondary ml-1" onclick="more_context(0)"
                            style="display:none"><i class="fa-solid fa-caret-up"></i> 감추기
                    </button>
                </div>
            </div>
        </div>

        <!-- 노트 2 추가 -->
        <div class="card border-dark mb-3" id="item_note_1">
            <div class="card-header">
                <div class="note-top-day ml-2">Day 02</div>
                <div class="note-top-title ml-2">
                    <div>22.6.21 PM 18:30</div>
                    <div>나는 제목이다</div>
                </div>
            </div>
            <div class="card-body text-dark note-bottom">
                <div class="card-text ml-1 mr-1">
                    동해 물과 백두산이 마르고 닳도록하느님이 보우하사 우리나라 만세.무궁화 삼천리 화려 강산대한 사람, 대한으로 길이 보전하세.남산 위에 저 소나무, 철갑을 두른 듯바람 서리 불변함은 우리
                    기상일세.무궁화 삼천리 화려 강산대한 사람, 대한으로 길이 보전하세.가을 하늘 공활한데 높고 구름 없이밝은 달은 우리 가슴 일편단심일세.무궁화 삼천리 화려 강산대한 사람 대한으로 길이
                    보전하세 대한으로 길이 보전하세.가을 하늘 공활한데 높고 구름 없이밝은 달은 우리 가슴 일편단심일세.무궁화 삼천리 화려 강산대한 사람 대한으로 길이 보전하세 삼천리 화려 강산대한 사람
                    대한으로 길이 보전하세 대한으로 길이 보전하세.가을 하늘 공활한데 높고 구름 없이밝은 달은 우리 가슴 일편단심일세.무궁화 삼천리 화려 강산대한 사람 대한으로 길이 보전하세
                </div>

                <div class="todo-note-list mt-4" style="display:none">
                    <div class="list-group">
    <!--TODO가 없을때 상단 표시-->
                        <h7 class="todo-notice ml-3 mb-3" style="text-align: left"><i class="fa-solid fa-bullhorn"></i> 지금 TO DO LIST 를 만들어보세요!</i></h7>
    <!--TODO가 있을때 상단 표시-->
                        <h3 class="todo-logo ml-3 mb-3" style="text-align: left"><i class="fa-solid fa-pen-to-square"> TO DO LIST</i></h3>
    <!--TODO추가구역 시작-->
    <!--todoitem 시작-->
                        <div class="list-group-item todo-item todo-active" aria-current="true" todo-num="1">
                            <div class="icon_state_todo">
                                <div class="fa-solid fa-circle-check mr-3" id="icon_success" style="color:green"> 임무완료!</div>
                                <div class="fa-solid fa-circle-minus mr-3" id="icon_yet" style="color:red"> 아직...</div>
                            </div>
                            <span class="todo-item-text">The current link item</span>
                        </div>
    <!--todoitem 끝-->
                        <div class="list-group-item todo-item todo-none" aria-current="true" todo-num="2">
                            <div class="icon_state_todo">
                                <div class="fa-solid fa-circle-check mr-3" id="icon_success" style="color:green"> 임무완료!</div>
                                <div class="fa-solid fa-circle-minus mr-3" id="icon_yet" style="color:red"> 아직...</div>
                            </div>
                            <span class="todo-item-text">The current link item</span>
                        </div>
    <!--todoitem 끝/시작-->
                        <div class="list-group-item todo-item todo-none" aria-current="true" todo-num="3">
                            <div class="icon_state_todo">
                                <div class="fa-solid fa-circle-check mr-3" id="icon_success" style="color:green"> 임무완료!</div>
                                <div class="fa-solid fa-circle-minus mr-3" id="icon_yet" style="color:red"> 아직...</div>
                            </div>
                            <span class="todo-item-text">The current link item</span>
                        </div>
    <!--todoitem 끝/시작-->
                        <div class="list-group-item todo-item todo-none" aria-current="true" todo-num="4">
                            <div class="icon_state_todo">
                                <div class="fa-solid fa-circle-check mr-3" id="icon_success" style="color:green"> 임무완료!</div>
                                <div class="fa-solid fa-circle-minus mr-3" id="icon_yet" style="color:red"> 아직...</div>
                            </div>
                            <span class="todo-item-text">The current link item</span>
                        </div>
   <!--TODO추가구역 끝-->
                    </div>
                </div>
                <div class="note-button ml-3 mt-2">
                    <button type="button" onclick="modify_note(1)" class="edit_bt btn btn-primary ml-1" style="display:none"><i
                            class="fa-solid fa-pen" ></i>
                    </button>
                    <button type="button" onclick="delet_note(1)" class="del_bt btn btn-danger ml-1" style="display:none"><i
                            class="fa-solid fa-trash-can" ></i>
                    </button>
                    <button type="button" class="more_bt btn btn-secondary ml-1" onclick="more_context(1)"
                            style="display:block"><i class="fa-solid fa-caret-down"></i> 더보기
                    </button>
                    <button type="button" class="hide_bt btn btn-secondary ml-1" onclick="more_context(1)"
                            style="display:none"><i class="fa-solid fa-caret-up"></i> 감추기
                    </button>
                </div>
            </div>
        </div>

        <!-- 노트 3 추가 -->
        <div class="card border-dark mb-3" id="item_note_2">
            <div class="card-header">
                <div class="note-top-day ml-2">Day 02</div>
                <div class="note-top-title ml-2">
                    <div>22.6.21 PM 18:30</div>
                    <div>나는 제목이다</div>
                </div>
            </div>
            <div class="card-body text-dark note-bottom">
                <div class="card-text ml-1 mr-1">
                    동해 물과 백두산이 마르고 닳도록하느님이 보우하사 우리나라 만세.무궁화 삼천리 화려 강산대한 사람, 대한으로 길이 보전하세.
                </div>
                <div class="todo-note-list mt-4" style="display:none">
                    <div class="list-group">
    <!--TODO가 없을때 상단 표시-->
                        <h7 class="todo-notice ml-3 mb-3" style="text-align: left"><i class="fa-solid fa-bullhorn"></i> 지금 TO DO LIST 를 만들어보세요!</i></h7>
    <!--TODO가 있을때 상단 표시-->
                        <h3 class="todo-logo ml-3 mb-3" style="text-align: left"><i class="fa-solid fa-pen-to-square"> TO DO LIST</i></h3>
    <!--TODO추가구역 시작-->
    <!--todoitem 시작-->
                        <div class="list-group-item todo-item todo-active" aria-current="true" todo-num="1">
                            <div class="icon_state_todo">
                                <div class="fa-solid fa-circle-check mr-3" id="icon_success" style="color:green"> 임무완료!</div>
                                <div class="fa-solid fa-circle-minus mr-3" id="icon_yet" style="color:red"> 아직...</div>
                            </div>
                            <span class="todo-item-text">The current link item</span>
                        </div>
    <!--todoitem 끝-->
                        <div class="list-group-item todo-item todo-none" aria-current="true" todo-num="2">
                            <div class="icon_state_todo">
                                <div class="fa-solid fa-circle-check mr-3" id="icon_success" style="color:green"> 임무완료!</div>
                                <div class="fa-solid fa-circle-minus mr-3" id="icon_yet" style="color:red"> 아직...</div>
                            </div>
                            <span class="todo-item-text">The current link item</span>
                        </div>
    <!--todoitem 끝/시작-->
                        <div class="list-group-item todo-item todo-none" aria-current="true" todo-num="3">
                            <div class="icon_state_todo">
                                <div class="fa-solid fa-circle-check mr-3" id="icon_success" style="color:green"> 임무완료!</div>
                                <div class="fa-solid fa-circle-minus mr-3" id="icon_yet" style="color:red"> 아직...</div>
                            </div>
                            <span class="todo-item-text">The current link item</span>
                        </div>
    <!--todoitem 끝/시작-->
                        <div class="list-group-item todo-item todo-none" aria-current="true" todo-num="4">
                            <div class="icon_state_todo">
                                <div class="fa-solid fa-circle-check mr-3" id="icon_success" style="color:green"> 임무완료!</div>
                                <div class="fa-solid fa-circle-minus mr-3" id="icon_yet" style="color:red"> 아직...</div>
                            </div>
                            <span class="todo-item-text">The current link item</span>
                        </div>
   <!--TODO추가구역 끝-->
                    </div>
                </div>
                <div class="note-button ml-3 mt-2">
                    <button type="button" onclick="modify_note(2)" class="edit_bt btn btn-primary ml-1" style="display:none"><i
                            class="fa-solid fa-pen" ></i>
                    </button>
                    <button type="button" onclick="delet_note(2)" class="del_bt btn btn-danger ml-1" style="display:none"><i
                            class="fa-solid fa-trash-can" ></i>
                    </button>
                    <button type="button" class="more_bt btn btn-secondary ml-1" onclick="more_context(2)"
                            style="display:block"><i class="fa-solid fa-caret-down"></i> 더보기
                    </button>
                    <button type="button" class="hide_bt btn btn-secondary ml-1" onclick="more_context(2)"
                            style="display:none"><i class="fa-solid fa-caret-up"></i> 감추기
                    </button>
                </div>
            </div>
        </div>


    </div>
    <div class="main-box">
        <div class="share_btn">
            <button type="button" onclick="sharetwitter()" class="btn_comm">트위터로 공유하기</button>
            <button type="button" id="shareFb" class="btn_comm">페이스북으로 공유하기</button>
            <button type="button" id="shareKt" class="btn_comm">카카오톡으로 공유하기</button>
        </div>
    </div>

</main>


<footer>
    <!-- 게시물 쓰기 버튼, 클릭시 모달 창 띄움 -->
    <!-- 모달 창 설정 -->
    <div class="write-area">
        <div class="d-grid gap-2 add_note js-click">
            <button type="button" class="btn btn-primary" id="btn-modal">새 노트 쓰기</button>
        </div>
        <div class="write-modal">
            <div class="write-header">
                <div class="write-nav">
                    <div class="todo-area form-floating">
                        <input type="text" class="form-control todo-input" id="todo-input" placeholder="todo"
                               style="ime-mode:active;">
                        <label for="todo-input">오늘 할 일을 우선 계획해보세요!</label>
                        <button type="button" class="btn btn-success ml-2" onclick="add_todo()">추가</button>
                    </div>
                    <div class="panel-body">
                        <ul class="todo_parent mt-1" id="todo_parent">

                        </ul>
                    </div>
                </div>
                <div class="write-body">
                    <!-- 에디터 소스-->
                    <form method="post" class="form-floating mt-2 mb-2" action="">
                        <input type="text" name="subject" class="form-control" id="context-title" placeholder="title">
                        <label for="context-title">제목</label>
                    </form>
                    <textarea id="summernote" name="memo"></textarea>

                </div>
            </div>
            <div class="write-footer">
                <div class="write-footer-bt">
                    <div class="write-complete">
                        <button type="button" class="btn btn-success mt-2" onclick="save_comment()">작성하기</button>
                    </div>
                    <div class="js-close">
                        <button type="button" class="btn btn-danger mt-2">닫기</button>
                    </div>
                </div>

            </div>
        </div>
    </div>


    <script>

        //<!-- 모달창: 자동높이 늘리기 -->
        $('#summernote').on('summernote.keyup', function (we, e) {
            let innerHeight = $('.note-editable').innerHeight();
            let scrollHeight = $('.note-editable').prop('scrollHeight');

            if (innerHeight < scrollHeight) {
                $('.note-editable').css('height', 12 + $('.note-editable').prop('scrollHeight') + 'px');
            }
        });

        // <!-- 모달창: 열기 / 닫기 버튼 (닫을 경우 내용 초기화 기능) -->
        $('.js-click').click(function () {
            $('.write-area').addClass('modal-open');
            $("html").css('overflow-y', 'hidden');
            $(".write-footer-bt").css('display', 'flex');

            writing = true;
        });

        $('.js-close').click(function () {
            if ($('#context-title').val() != '' || !($('#summernote').val() == '' || $('#summernote').val() == '<p><br></p>') || array_todo.length != 0) {
                if (confirm("작성중이던 내용이 있습니다. 그래도 닫으시겠습니까?")) {
                    $('.write-area').removeClass('modal-open');
                    $(".write-footer-bt").css('display', 'none');
                    $("html").css('overflow-y', 'auto');
                    $(".write-body textarea").css('height', '150');
                    $('#context-title').val('');
                    $('#todo-input').val('');
                    $('#summernote').summernote('reset');
                    const todo_parent = document.querySelector(".todo_parent");
                    array_todo = [];
                    array_num = 0;
                    while (todo_parent.hasChildNodes()) {	// 부모노드가 자식이 있는지 여부를 알아낸다
                        todo_parent.removeChild(todo_parent.firstChild);
                    }
                    writing = false;
                }
            } else {
                $('.write-area').removeClass('modal-open');
                $(".write-footer-bt").css('display', 'none');
                $("html").css('overflow-y', 'auto');
                writing = false;
            }
        });

    </script>

</footer>

</body>
</html>